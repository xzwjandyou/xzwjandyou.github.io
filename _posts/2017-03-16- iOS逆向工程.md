---
layout: post
title: 'iOS逆向工程'
tags: [language]
---
> 1988年出生，目前从事iOS软件开发工作，17年开始打算将一些技术分享和好文章分享到博客上面，欢迎好朋友随时加我微信xzwjandyou交流。

---

关于逆向，我做了两种形式：
>越狱机器的补丁tweak。
>
>非越狱机器重签名ipa。
>

##关于dylib

在iOS中，lib分为static和dynamic两种，其中static lib在编译阶段称为App可执行文件的一部分，会增加可执行文件的大小。因为App尺寸变大，启动时需要加载的内容变多，可能导致App启动变慢。dylib相对智能一些。他不会改变可执行文件的大小，只有当App需要用到这个dylib时，iOS彩绘把它加载进内存，称为App进程的一部分。


## 越狱机器的逆向tweak：

我用的是iphone4，因为它重做系统后最高到7.1.2。以微信为例。

建议先看看小黄书，逆向的三板斧：通过reveal查看界面UI，class_dump 把微信的头文件导出，lldb。

参考文章：

https://yohunl.com/ios-yue-yu-de-tweakkai-fa/

http://www.cnblogs.com/xilifeng/p/4824872.html

http://www.liuchendi.com/2015/12/18/iOS/21_Tweak/


## 非越狱机器重签名ipa

上面介绍的是越狱的安装补丁，但是如果要在非越狱环境下实现改怎么做呢？

说起来也很简单，通过iosopendev生成dylib，yololib注入到目标文件，重签名，done。

参考文章：
https://github.com/Urinx/iOSAppHook

http://www.isaced.com/post-278.html

## 总结：
最近花了大概一周的时间，从0开始，越狱机器的tweak到非越狱机器的ipa，以微信为目标文件，劫持了它的定位功能，代码已经上传github，地址如下：
https://github.com/xzwjandyou/WeChatLocationManager

最后说一下感悟吧，从第一个tweak demo到破解微信代码，中间遇到了很多困难，无论是发帖还是google好在都一个一个的解决了，记笔记是一个非常好的习惯，我写这边文章不是详细说明开发过程细节（当然其他的文章已经说的差不多了），怎么样将知识点串联起来，解决问题才是关键。
